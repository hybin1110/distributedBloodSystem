
@{
    ViewBag.Title = "Blood Quality";
    Layout = "~/Views/Shared/_HospitalLayout.cshtml";
}

@model FYP_Blood.Models.QRCodeModel

<div class="main-content">
    <div class="container-fluid">

        <!-- Page Heading -->
        <div class="row p-3 quality-listing-heading">
            <h3><span class="authority-title">Blood Quality Record</span></h3>
            <span class="authority-desc fw-bolder">View tested blood pack result where the status indicating the blood condition.</span>
        </div>

        <div class="row mt-3 mb-4 quality-listing-searchbox">
            <div class="container card col-xl-10">
                <form class="form-inline d-flex justify-content-center md-form form-sm mt-0" name="quality-records-form">
                    <div class="input-group rounded m-3">
                        <input type="search" class="form-control rounded" placeholder="Appointment ID" name="searchdonorid" id="searchdonorid" ng-model="searchdonorid" />
                    </div>
                    <button class="btn-authority col-sm-2" ng-click="searchbloodresult();">SEARCH</button>
                </form>
            </div>
        </div><hr />

        <div class="row p-3 quality-records-container" id="quality-records-container" style="display:none;">
            <span class="quality-records-desc">Search Result:</span>
            <div class="d-flex justify-content-center">
                <div class="row quality-records mt-4">
                    <div class="row col-md-6">
                        <span>
                            Blood Quality ID: @TempData["bqid"] <br />
                        </span>
                        <span class="mt-2">
                            Appointment ID: @TempData["donorid"]<br />
                        </span>
                        <span class="mt-2">
                            Authority ID: @TempData["hosid"]<br />
                        </span>
                        <span class="mt-2">
                            Result: @TempData["result"]<br />
                        </span>
                        <span class="mt-4">
                            <a href="javascript:window.print()" id="printlink">Click to Print Blood Pack Label</a>
                        </span>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="col-md-10  d-flex justify-content-end">
                                <img id="bloodqr" src="~/image/QrCode.jpg" alt="Image" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    window.onload = function () {
        var data = sessionStorage.getItem('clicked');
        if (data == 'true') {
            $("#quality-records-container").css("display", "block");
            sessionStorage.setItem('clicked', true);
        }
    };
</script>

